import{v as E,m as L,l as R,a7 as S,a8 as w,u as _,r as $,a9 as k,aa as c,ab as H,$ as M,s as z,a as B,a2 as C,ac as D,ad as F}from"./index-BctRhts2.js";const q="/barber-build/assets/Slavaworks-BvkLNOX9.png";function I(s){return Math.floor(Math.abs(s))*Math.sign(s)}const N=E({scale:{type:[Number,String],default:.5},...L()},"VParallax"),A=R()({name:"VParallax",props:N(),setup(s,g){let{slots:h}=g;const{intersectionRef:o,isIntersecting:l}=S(),{resizeRef:d,contentRect:i}=w(),{height:x}=_(),r=$();k(()=>{var t;o.value=d.value=(t=r.value)==null?void 0:t.$el});let e;c(l,t=>{t?(e=D(o.value),e=e===document.scrollingElement?document:e,e.addEventListener("scroll",a,{passive:!0}),a()):e.removeEventListener("scroll",a)}),H(()=>{e==null||e.removeEventListener("scroll",a)}),c(x,a),c(()=>{var t;return(t=i.value)==null?void 0:t.height},a);const u=M(()=>1-F(+s.scale));let m=-1;function a(){l.value&&(cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var f;const t=((f=r.value)==null?void 0:f.$el).querySelector(".v-img__img");if(!t)return;const v=e instanceof Document?document.documentElement.clientHeight:e.clientHeight,p=e instanceof Document?window.scrollY:e.scrollTop,y=o.value.getBoundingClientRect().top+p,n=i.value.height,b=y+(n-v)/2,P=I((p-b)*u.value),V=Math.max(1,(u.value*(v-n)+n)/n);t.style.setProperty("transform",`translateY(${P}px) scale(${V})`)}))}return z(()=>B(C,{class:["v-parallax",{"v-parallax--active":l.value},s.class],style:s.style,ref:r,cover:!0,onLoadstart:a,onLoad:a},h)),{}}});export{A as V,q as _};
